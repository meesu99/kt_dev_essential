# 🚀 트랜잭션 연습 프로젝트

Spring Framework의 트랜잭션 관리 기능을 학습하기 위한 예제 프로젝트입니다.

## 📚 프로젝트 소개

이 프로젝트는 다음과 같은 기능을 제공합니다:

- **트랜잭션이 없는 경우의 위험성** 시연
- **트랜잭션이 있는 경우의 안전성** 시연
- **H2 데이터베이스**를 활용한 실습
- **웹 인터페이스**를 통한 직관적인 테스트

## 🛠️ 기술 스택

- **Java 17**
- **Spring Framework 5.3.23**
- **Spring MVC**
- **Thymeleaf 3.0.15**
- **H2 Database**
- **Maven**
- **Jetty (내장 서버)**

## 🚀 실행 방법

### 1. 프로젝트 컴파일
```bash
mvn clean compile
```

### 2. 웹 서버 실행
```bash
mvn jetty:run
```

### 3. 접속
- **메인 페이지**: http://localhost:8080
- **학생 관리**: http://localhost:8080/students
- **트랜잭션 테스트**: http://localhost:8080/students/test
- **H2 데이터베이스 콘솔**: http://localhost:8082

## 📖 사용법

### 1. 메인 페이지
- 프로젝트 소개와 바로가기 링크를 제공합니다.

### 2. 학생 관리 시스템
- 현재 등록된 학생 목록을 확인할 수 있습니다.
- 트랜잭션 테스트 페이지로 이동할 수 있습니다.

### 3. 트랜잭션 테스트
- **위험한 방법 (트랜잭션 없음)**: 오류 발생 시 일부 데이터만 저장됩니다.
- **안전한 방법 (트랜잭션 있음)**: 오류 발생 시 모든 데이터가 롤백됩니다.
- **정상 추가**: 오류 없이 안전하게 데이터를 추가합니다.
- **데이터 초기화**: 모든 데이터를 삭제하고 테이블을 초기화합니다.

## 🏗️ 프로젝트 구조

```
src/main/java/com/example/
├── config/
│   ├── DatabaseConfig.java      # 데이터베이스 설정
│   ├── WebAppInitializer.java  # 웹 애플리케이션 초기화
│   └── WebConfig.java          # 웹 설정
├── controller/
│   ├── HomeController.java     # 메인 페이지 컨트롤러
│   └── StudentController.java  # 학생 관리 컨트롤러
├── model/
│   └── Student.java           # 학생 모델
├── repository/
│   └── StudentRepository.java # 데이터 접근 계층
└── service/
    └── StudentService.java    # 비즈니스 로직 계층
```

## 🧪 트랜잭션 테스트 시나리오

### 시나리오 1: 트랜잭션 없이 데이터 추가
1. "트랜잭션 없이 추가 (위험!)" 버튼 클릭
2. 오류가 발생하지만 일부 데이터는 저장됨
3. 학생 목록에서 확인

### 시나리오 2: 트랜잭션으로 데이터 추가
1. "트랜잭션으로 추가 (안전!)" 버튼 클릭
2. 오류가 발생하면 모든 데이터가 롤백됨
3. 학생 목록에서 확인

### 시나리오 3: 정상적인 데이터 추가
1. "정상적으로 추가" 버튼 클릭
2. 모든 데이터가 성공적으로 저장됨
3. 학생 목록에서 확인

## 🔧 데이터베이스 설정

- **데이터베이스**: H2 (파일 기반)
- **파일 위치**: `~/transaction_example`
- **웹 콘솔**: http://localhost:8082
- **JDBC URL**: `jdbc:h2:~/transaction_example;AUTO_SERVER=true;MODE=MySQL`

## 📝 주요 학습 포인트

1. **트랜잭션의 중요성**
   - 데이터 일관성 보장
   - 오류 발생 시 롤백

2. **Spring의 트랜잭션 관리**
   - `@Transactional` 어노테이션
   - 선언적 트랜잭션 관리

3. **데이터베이스 연동**
   - JdbcTemplate 사용
   - H2 데이터베이스 활용

## 🐛 문제 해결

### 컴파일 오류가 발생하는 경우
```bash
mvn clean compile
```

### 서버가 시작되지 않는 경우
- 포트 8080이 사용 중인지 확인
- 다른 포트로 변경하려면 `pom.xml`의 Jetty 설정 수정

### 데이터베이스 연결 오류
- H2 콘솔에서 데이터베이스 파일 확인
- 데이터베이스 파일 삭제 후 재시작

## 📄 라이선스

이 프로젝트는 교육 목적으로 제작되었습니다.
